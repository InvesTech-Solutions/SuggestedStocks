'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _keyframesLibrary = require('./keyframesLibrary');

var _keyframesLibrary2 = _interopRequireDefault(_keyframesLibrary);

var _selectorLibrary = require('./selectorLibrary');

var _selectorLibrary2 = _interopRequireDefault(_selectorLibrary);

var _replace = require('./replace');

var _replace2 = _interopRequireDefault(_replace);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (code) {
  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var defaultOptions = {
    ignoreAttributeSelectors: false,
    replaceKeyframes: false,
    prefix: '',
    suffix: ''
  };

  var options = Object.assign({}, defaultOptions, opts);
  var data = code.toString();

  _selectorLibrary2.default.setPrefix(options.prefix);
  _selectorLibrary2.default.setSuffix(options.suffix);

  if (!options.ignoreAttributeSelectors) {
    _selectorLibrary2.default.setAttributeSelector(data.match(_replace2.default.regex.attributeSelectors));
  }

  if (options.replaceKeyframes) {
    _keyframesLibrary2.default.fillLibrary(data);
  }

  _selectorLibrary2.default.fillLibrary(data, options);
};

module.exports = exports['default'];